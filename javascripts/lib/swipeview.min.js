/*!
 * SwipeView v0.10 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
 var SwipeView=function(){var e="ontouchstart"in window,g="onorientationchange"in window?"orientationchange":"resize",f=e?"touchstart":"mousedown",h=e?"touchmove":"mousemove",j=e?"touchend":"mouseup",l=e?"touchcancel":"mouseup",k=function(a,c){var b,d,e;this.wrapper=typeof a=="string"?document.querySelector(a):a;this.options={text:null,numberOfPages:3,snapThreshold:null,hastyPageFlip:!1};for(b in c)this.options[b]=c[b];this.wrapper.style.overflow="hidden";this.wrapper.style.position="relative";this.masterPages=
[];d=document.createElement("div");d.id="swipeview-slider";d.style.cssText="position:relative;top:0;height:100%;width:100%;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);-webkit-transition-timining-function:ease-out";this.wrapper.appendChild(d);this.slider=d;this.refreshSize();for(b=-1;b<2;b++){d=document.createElement("div");d.id="swipeview-masterpage-"+(b+1);d.style.cssText="-webkit-transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+b*100+"%";if(!d.dataset)d.dataset=
{};e=b==-1?this.options.numberOfPages-1:b;d.dataset.pageIndex=e;d.dataset.upcomingPageIndex=e;this.slider.appendChild(d);this.masterPages.push(d)}b=this.masterPages[1].className;this.masterPages[1].className=!b?"swipeview-active":b+" swipeview-active";window.addEventListener(g,this,!1);this.wrapper.addEventListener(f,this,!1);this.wrapper.addEventListener(h,this,!1);this.wrapper.addEventListener(j,this,!1);this.slider.addEventListener("webkitTransitionEnd",this,!1)};k.prototype={currentMasterPage:1,
x:0,page:0,pageIndex:0,customEvents:[],onFlip:function(a){this.wrapper.addEventListener("swipeview-flip",a,!1);this.customEvents.push(["flip",a])},onMoveOut:function(a){this.wrapper.addEventListener("swipeview-moveout",a,!1);this.customEvents.push(["moveout",a])},onMoveIn:function(a){this.wrapper.addEventListener("swipeview-movein",a,!1);this.customEvents.push(["movein",a])},onTouchStart:function(a){this.wrapper.addEventListener("swipeview-touchstart",a,!1);this.customEvents.push(["touchstart",a])},
destroy:function(){var a,c;a=0;for(c=customEvents.length;a<c;a++)this.wrapper.removeEventListener("swipeview-"+this.customEvents[a][0],this.customEvents[a][1],!1);this.customEvents=[];window.removeEventListener(g,this,!1);this.wrapper.removeEventListener(f,this,!1);this.wrapper.removeEventListener(h,this,!1);this.wrapper.removeEventListener(j,this,!1);this.slider.removeEventListener("webkitTransitionEnd",this,!1)},refreshSize:function(){this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=
this.wrapper.clientHeight;this.pageWidth=this.wrapperWidth;this.maxX=-2*this.pageWidth+this.wrapperWidth;this.snapThreshold=this.options.snapThreshold===null?Math.round(this.pageWidth*0.15):/%/.test(this.options.snapThreshold)?Math.round(this.pageWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePageCount:function(a){this.options.numberOfPages=a},goToPage:function(a){var c;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,
"");for(c=0;c<3;c++)className=this.masterPages[c].className,/(^|\s)swipeview-loading(\s|$)/.test(className)||(this.masterPages[c].className=!className?"swipeview-loading":className+" swipeview-loading");this.pageIndex=this.page=a=a<0?0:a>this.options.numberOfPages-1?this.options.numberOfPages-1:a;this.slider.style.webkitTransitionDuration="0";this.__pos(-a*this.pageWidth);this.currentMasterPage=this.page+1-Math.floor((this.page+1)/3)*3;this.masterPages[this.currentMasterPage].className+=" swipeview-active";
this.currentMasterPage==0?(this.masterPages[2].style.left=this.page*100-100+"%",this.masterPages[0].style.left=this.page*100+"%",this.masterPages[1].style.left=this.page*100+100+"%",this.masterPages[2].dataset.upcomingPageIndex=this.page==0?this.options.numberOfPages-1:this.page-1,this.masterPages[0].dataset.upcomingPageIndex=this.page,this.masterPages[1].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):this.currentMasterPage==1?(this.masterPages[0].style.left=this.page*
100-100+"%",this.masterPages[1].style.left=this.page*100+"%",this.masterPages[2].style.left=this.page*100+100+"%",this.masterPages[0].dataset.upcomingPageIndex=this.page==0?this.options.numberOfPages-1:this.page-1,this.masterPages[1].dataset.upcomingPageIndex=this.page,this.masterPages[2].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):(this.masterPages[1].style.left=this.page*100-100+"%",this.masterPages[2].style.left=this.page*100+"%",this.masterPages[0].style.left=
this.page*100+100+"%",this.masterPages[1].dataset.upcomingPageIndex=this.page==0?this.options.numberOfPages-1:this.page-1,this.masterPages[2].dataset.upcomingPageIndex=this.page,this.masterPages[0].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1);this.__flip()},next:function(){this.directionX=-1;this.x-=1;this.__checkPosition()},prev:function(){this.directionX=1;this.x+=1;this.__checkPosition()},handleEvent:function(a){switch(a.type){case f:this.__start(a);break;case h:this.__move(a);
break;case l:case j:this.__end(a);break;case g:this.__resize();break;case "webkitTransitionEnd":a.target==this.slider&&!this.options.hastyPageFlip&&this.__flip()}},__pos:function(a){this.x=a;this.slider.style.webkitTransform="translate3d("+a+"px,0,0)"},__resize:function(){this.refreshSize();this.slider.style.webkitTransitionDuration="0";this.__pos(-this.page*this.pageWidth)},__start:function(a){if(!this.initiated)a=e?a.touches[0]:a,this.initiated=!0,this.thresholdExceeded=this.moved=!1,this.startX=
a.pageX,this.startY=a.pageY,this.pointX=a.pageX,this.pointY=a.pageY,this.directionX=this.stepsY=this.stepsX=0,this.directionLocked=!1,this.slider.style.webkitTransitionDuration="0",this.__event("touchstart")},__move:function(a){if(this.initiated){var c=e?a.touches[0]:a,b=c.pageX-this.pointX,d=c.pageY-this.pointY,g=this.x+b,f=Math.abs(c.pageX-this.startX);this.moved=!0;this.pointX=c.pageX;this.pointY=c.pageY;this.directionX=b>0?1:b<0?-1:0;this.stepsX+=Math.abs(b);this.stepsY+=Math.abs(d);if(!(this.stepsX<
10&&this.stepsY<10))if(!this.directionLocked&&this.stepsY>this.stepsX)this.initiated=!1;else{a.preventDefault();this.directionLocked=!0;if(!this.thresholdExceeded&&f>=this.snapThreshold)this.thresholdExceeded=!0,this.__event("moveout");else if(this.thresholdExceeded&&f<this.snapThreshold)this.thresholdExceeded=!1,this.__event("movein");this.__pos(g)}}},__end:function(a){if(this.initiated&&(a=e?a.changedTouches[0]:a,this.initiated=!1,this.moved))Math.abs(a.pageX-this.startX)<this.snapThreshold?(this.slider.style.webkitTransitionDuration=
"300ms",this.__pos(-this.page*this.pageWidth)):this.__checkPosition()},__checkPosition:function(){var a,c,b;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,"");this.directionX>0?(this.page=-Math.ceil(this.x/this.pageWidth),this.currentMasterPage=this.page+1-Math.floor((this.page+1)/3)*3,this.pageIndex=this.pageIndex==0?this.options.numberOfPages-1:this.pageIndex-1,a=this.currentMasterPage-1,a=a<0?2:a,this.masterPages[a].style.left=
this.page*100-100+"%",c=this.page-1):(this.page=-Math.floor(this.x/this.pageWidth),this.currentMasterPage=this.page+1-Math.floor((this.page+1)/3)*3,this.pageIndex=this.pageIndex==this.options.numberOfPages-1?0:this.pageIndex+1,a=this.currentMasterPage+1,a=a>2?0:a,this.masterPages[a].style.left=this.page*100+100+"%",c=this.page+1);b=this.masterPages[this.currentMasterPage].className;/(^|\s)swipeview-active(\s|$)/.test(b)||(this.masterPages[this.currentMasterPage].className=!b?"swipeview-active":b+
" swipeview-active");b=this.masterPages[a].className;/(^|\s)swipeview-loading(\s|$)/.test(b)||(this.masterPages[a].className=!b?"swipeview-loading":b+" swipeview-loading");c-=Math.floor(c/this.options.numberOfPages)*this.options.numberOfPages;this.masterPages[a].dataset.upcomingPageIndex=c;this.slider.style.webkitTransitionDuration="500ms";newX=-this.page*this.pageWidth;this.x==newX?this.__flip():(this.__pos(newX),this.options.hastyPageFlip&&this.__flip())},__flip:function(){this.__event("flip");
for(i=0;i<3;i++)this.masterPages[i].className=this.masterPages[i].className.replace(/(^|\s)swipeview-loading(\s|$)/,""),this.masterPages[i].dataset.pageIndex=this.masterPages[i].dataset.upcomingPageIndex},__event:function(a){var c=document.createEvent("Event");c.initEvent("swipeview-"+a,!0,!0);this.wrapper.dispatchEvent(c)}};return k}();
